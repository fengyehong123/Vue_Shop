## ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®çš„æ–¹å¼
> çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼
`v-bind`å±æ€§ç»‘å®š

> å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼
`v-on`äº‹ä»¶ç»‘å®š

> å…„å¼Ÿç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®
`EventBus`
- `$on`: *æ¥æ”¶æ•°æ®çš„é‚£ä¸ªç»„ä»¶*
- `$emit`: *å‘é€æ•°æ®çš„é‚£ä¸ªç»„ä»¶*

ä¸Šé¢ä¸‰ç§æ–¹å¼åªé€‚åˆäºå°èŒƒå›´å†…çš„æ•°æ®å…±äº«,ä¸é€‚åˆäºå¤§èŒƒå›´å†…çš„æ•°æ®å…±äº«
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æ¨å‡ºäº†Vuex

## Vuex
Vuexæ˜¯å®ç°ç»„ä»¶å…¨å±€çŠ¶æ€(æ•°æ®)ç®¡ç†çš„ä¸€ç§æœºåˆ¶,å¯ä»¥æ–¹ä¾¿çš„å®ç°*ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«*
> ä½¿ç”¨Vuexç»Ÿä¸€ç®¡ç†çš„å¥½å¤„
- èƒ½å¤Ÿåœ¨vuexä¸­é›†ä¸­ç®¡ç†å…±äº«çš„æ•°æ®,æ˜“äºå¼€å‘å’ŒåæœŸç»´æŠ¤
- èƒ½å¤Ÿé«˜æ•ˆçš„å®ç°ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«,æé«˜å¼€å‘æ•ˆç‡
- å­˜å‚¨åœ¨vuexä¸­çš„æ•°æ®éƒ½æ˜¯å“åº”å¼çš„,èƒ½å¤Ÿå®æ—¶ä¿æŒæ•°æ®ä¸é¡µé¢çš„åŒæ­¥

### ä»€ä¹ˆæ ·çš„æ•°æ®é€‚åˆå­˜å‚¨åˆ°vuexä¸­
ä¸€èˆ¬æƒ…å†µä¸‹,åªæœ‰ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®,æ‰æœ‰å¿…è¦å­˜å‚¨åˆ°vuexä¸­;
å¯¹äºç»„ä»¶ä¸­çš„ç§æœ‰æ•°æ®,ä¾æ—§å­˜å‚¨åœ¨ç»„ä»¶è‡ªèº«çš„dataä¸­å³å¯.

### Vuexçš„åŸºæœ¬ä½¿ç”¨
1. å®‰è£…Vuexä¾èµ–åŒ…
`npm install vuex --save`
2. å¯¼å…¥vuexåŒ…
```js
    import Vuex from 'vuex''
    Vue.use(Vuex)
```
3. åˆ›å»ºstoreå¯¹è±¡
```js
    const store = new Vuex.Store({
        // stateä¸­å­˜æ”¾çš„å°±æ˜¯å…¨å±€å…±äº«çš„æ•°æ®
        state: {count: 0}
    })
```
4. å°†storeå¯¹è±¡æŒ‚è½½åˆ°vueå®ä¾‹ä¸­
```js
    new Vue({
        el: '#app',
        render: h => h(app),
        router,
        // å°†åˆ›å»ºçš„å…±äº«æ•°æ®å¯¹è±¡æŒ‚è½½åˆ°vueå®ä¾‹ä¸­.æ‰€æœ‰çš„ç»„ä»¶å°±å¯ä»¥ç›´æ¥ä»storeä¸­è·å–å…¨å±€çš„æ•°æ®äº†
        store
    })
```

### Vuexä¸­çš„æ ¸å¿ƒæ¦‚å¿µ
- â­•State
> `state`æä¾›å”¯ä¸€çš„å…¬å…±æ•°æ®æº,æ‰€æœ‰å…±äº«çš„æ•°æ®éƒ½è¦ç»Ÿä¸€æ”¾åˆ°Storeçš„Stateä¸­è¿›è¡Œå­˜å‚¨
```js
    const store = new Vuex.Store({
        state: {count: 0}
    })
```
ğŸç»„ä»¶è®¿é—®Stateä¸­æ•°æ®çš„*ç¬¬ä¸€ç§æ–¹å¼*:
`this.$store.state.å…¨å±€æ•°æ®åç§°(count)`
ğŸç»„ä»¶è®¿é—®Stateä¸­æ•°æ®çš„*ç¬¬äºŒç§æ–¹å¼*:
```js
    // 1. ä»vuexä¸­æŒ‰éœ€å¯¼å…¥mapStateå‡½æ•°
    import { mapState } from 'vuex'

    // 2. å°†åˆšæ‰å¯¼å…¥çš„mapSateå‡½æ•°,å°†å½“å‰ç»„ä»¶éœ€è¦çš„å…¨å±€æ•°æ®,æ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„computedè®¡ç®—å±æ€§
    computed: {
        // å°†å…¨å±€å±æ€§æ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„è®¡ç®—å±æ€§ 
        ...mapState(['count'])
    }
```
- â­•Mutation
> Mutationç”¨äºå˜æ›´Storeä¸­çš„æ•°æ®

*è§¦å‘mutationsçš„ç¬¬ä¸€ç§æ–¹å¼*
ğŸ˜ˆ åªèƒ½`é€šè¿‡mutationå˜æ›´Storeæ•°æ®`,ä¸å¯ä»¥ç›´æ¥æ“ä½œStoreä¸­çš„æ•°æ®
ğŸ˜ˆ é€šè¿‡mutationçš„æ–¹å¼è™½ç„¶æ“ä½œèµ·æ¥ç¹çä¸€ç‚¹,ä½†æ˜¯å¯ä»¥é›†ä¸­ç›‘æ§æ‰€æœ‰æ•°æ®çš„å˜åŒ–,æ˜ç¡®æ•°æ®è¢«å“ªä¸ªæ–¹æ³•ä¿®æ”¹
```js
    const store = new Vuex.Store({
        state: {count: 0}
    }),
    // åœ¨vuexä¸­å®šä¹‰Mutation
    mutations: {
        add(state) {
            // å˜æ›´çŠ¶æ€
            state.count++
        }
    }
```
```js
    // åœ¨å…¶ä»–ç»„ä»¶ä¸­è§¦å‘mutation
    methods: {
        handle1() {
            // è§¦å‘mutationsçš„ç¬¬ä¸€ç§æ–¹å¼
            this.$store.commit('add')
        }
    }
```
> å¯ä»¥åœ¨è§¦å‘mutationsæ—¶ä¼ é€’å‚æ•°
```js
    const store = new Vuex.Store({
        state: {count: 0}
    }),
    // åœ¨vuexä¸­å®šä¹‰Mutation
    mutations: {
        addN(state, step) {
            // å˜æ›´çŠ¶æ€
            state.count += step
        }
    }
```
```js
    // åœ¨å…¶ä»–ç»„ä»¶ä¸­è§¦å‘mutation,å¹¶æºå¸¦å‚æ•°
    methods: {
        handle2() {
            // è°ƒç”¨commitå‡½æ•°,è§¦å‘mutationsæ—¶æºå¸¦å‚æ•°
            this.$store.commit('addN', 3)
        }
    }
```
*è§¦å‘mutationsçš„ç¬¬äºŒç§æ–¹å¼*
```js
    // ä»vuexä¸­æŒ‰éœ€å¯¼å…¥ mapMutationså‡½æ•°
    import { mapMutations } from 'vuex'

    // é€šè¿‡åˆšæ‰å¯¼å…¥çš„mapMutationså‡½æ•°,æ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„methodså‡½æ•°
    methods: {
        ...mapMutations(['add', 'addN'])
    }
```

- â­•Action
> Actionç”¨äºå¤„ç†å¼‚æ­¥ä»»åŠ¡
*è§¦å‘Actionçš„ç¬¬ä¸€ç§æ–¹å¼*
å¦‚æœé€šè¿‡å¼‚æ­¥æ“ä½œå˜æ›´æ•°æ®,å¿…é¡»é€šè¿‡Action,è€Œä¸èƒ½ä½¿ç”¨Mutation,
ä½†æ˜¯åœ¨Actionä¸­è¿˜æ˜¯è¦é€šè¿‡è§¦å‘Mutationçš„æ–¹å¼`é—´æ¥å˜æ›´æ•°æ®`
```js
    const store = new Vuex.Store({
        // ...çœç•¥å…¶å®ƒä»£ç 
        mutations: {
            add(state) {
                state.count++
            }
        },
        actions: {
            // æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°addAsync
            addAsync(context) {
                setTimeout(() => {
                    // æŠŠadd()æ–¹æ³•åŒ…è£¹åœ¨å¼‚æ­¥æ“ä½œçš„ä»£ç ä¸­,ä»è€Œå®ç°åœ¨Actionä¸­è§¦å‘mutationsä¸­çš„æ–¹æ³•
                    context.commit('add')
                }, 1000)
            }
        }
    })
```
```js
    // è§¦å‘Action
    methods: {
        handle() {
            // è§¦å‘actionsçš„ç¬¬ä¸€ç§æ–¹å¼
            this.$store.dispatch('addAsync')
        }
    }
```
*è§¦å‘Actionçš„ç¬¬äºŒç§æ–¹å¼*
```js
    // ä»vuexä¸­æŒ‰éœ€å¯¼å…¥mapActionså‡½æ•°
    import { mapActions } from 'vuex'

    // å°†æŒ‡å®šçš„actionså‡½æ•°,æ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„methodså‡½æ•°
    methods: {
        ...mapActions(['addAsync', 'addNAsync'])
    }
```
- â­•Getter
> `Getter`ç”¨äºå¯¹Storeä¸­çš„æ•°æ®è¿›è¡ŒåŠ å·¥å¤„ç†å½¢æˆæ–°çš„æ•°æ®,Getterå¹¶ä¸ä¼šæ”¹å˜Storeä¸­çš„æ•°æ®,åªæ˜¯å¯¹å…¶åŠ å·¥å¤„ç†è€Œå·²
ğŸ”¹ Getterå¯ä»¥å¯¹Storeä¸­å·²æœ‰çš„æ•°æ®è¿›è¡ŒåŠ å·¥å¤„ç†,å¤„ç†å®Œæˆä¹‹åå½¢æˆæ–°çš„æ•°æ®,ç±»ä¼¼Vueçš„è®¡ç®—å±æ€§
ğŸ”¹ Storeä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–,GetteråŒ…è£…å¤„ç†ä¹‹åçš„æ•°æ®ä¹Ÿä¼šéšä¹‹å‘ç”Ÿå˜åŒ–
```js
    const store = new Vuex.Store({
        state: {
            count: 0
        },
        getters: {
            showNum: state => {
                // getterå¹¶ä¸ä¼šä¿®æ”¹storeä¸­çš„æ•°æ®,åªæ˜¯å¯¹storeä¸­çš„æ•°æ®è¿›è¡ŒåŒ…è£…å¤„ç†
                return 'å½“å‰æœ€æ–°çš„æ•°é‡æ˜¯ã€Œ'+ state.count +'ã€'
            }
        }
    }),
```
- ğŸ›¸ä½¿ç”¨gettersçš„ç¬¬ä¸€ç§æ–¹å¼
`this.$store.getters.åç§°`
- ğŸ›¸ä½¿ç”¨gettersçš„ç¬¬äºŒç§æ–¹å¼
```js
    import { mapGetters } from 'vuex'

    computed: {
        ...mapGetters(['showNum'])
    }
```
